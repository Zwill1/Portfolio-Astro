---
// Components
import { Image } from 'astro:assets';

// Image Variables
import productUploader from '/src/assets/images/spotlights/product-uploader-thumbnail.jpg';
import aniStream from '/src/assets/images/spotlights/AniStream-thumbnail.jpg';
import socialDashboard2 from '/src/assets/images/spotlights/Social-Dashboard-thumbnail.jpg';


// Image array can be passed as props or fetched elsewhere
const images = [
    { src: productUploader, alt: 'Product Uploader' },
    { src: aniStream, alt: 'AniStream' },
    { src: socialDashboard2, alt: 'Admin Social Dashboard' },
];
---

<div class="relative overflow-hidden w-full max-w-4xl mx-auto rounded-2xl shadow-lg">
  <div id="slider" class="flex transition-transform duration-700 ease-in-out" style="transform: translateX(0%)">
    {images.map(({src, alt}, i) => (
      <Image src={src} class="w-full flex-shrink-0 object-cover" loading='eager' alt={`${alt} Slide ${i + 1}`} />
    ))}
  </div>

  <!-- Navigation Dots -->
  <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
    {images.map((_, i) => (
      <button class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition" on:click={`goToSlide(${i})`}></button>
    ))}
  </div>
</div>

<script type="module">
  let current = 0;
  const slider = document.getElementById("slider");
  const slides = slider.children;
  const total = slides.length;

  function goToSlide(index) {
    current = index;
    slider.style.transform = `translateX(-${100 * current}%)`;
  }

  function nextSlide() {
    current = (current + 1) % total;
    goToSlide(current);
  }

  // Autoplay
  setInterval(nextSlide, 5000); // 5 seconds
</script>
